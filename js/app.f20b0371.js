(function(){"use strict";var e={9844:function(e,o,t){var r=t(7195),a=function(){var e=this,o=e._self._c;return o("div",{attrs:{id:"app",valign:"top",align:"left"}},[o("b-container",[o("b-row",[o("b-col",[o("img",{staticStyle:{border:"2px"},attrs:{alt:"Aut'MEL'",src:t(4881),height:"100px"}})]),o("b-col",[o("img",{staticStyle:{border:"2px"},attrs:{alt:"Deul'Air",src:t(1434),height:"100px"}})]),o("b-col",[o("img",{staticStyle:{border:"2px"},attrs:{alt:"LM Oxygène",src:t(2465),height:"100px"}})])],1)],1),o("span",{staticStyle:{border:"2px"}},[o("div",{staticStyle:{position:"relative, z-index: 10"},attrs:{id:"map",align:"center",valign:"middle"}},[o("Isochrone",{attrs:{msg:"Cartographie des parcs"}})],1)]),e._m(0)],1)},s=[function(){var e=this,o=e._self._c;return o("span",{attrs:{id:"legend"}},[o("table",{staticClass:"legend",attrs:{border:"1px"}},[o("tr",[o("th",{staticStyle:{color:"#000000"}},[e._v("Légende Isochone (Valide OMS)")])]),o("tbody",[o("tr",[o("td",{staticStyle:{"background-color":"#1a9900"}},[e._v("> 12 m²/habitant en ville (45 m²/hab à la campagne)")])]),o("tr",[o("td",{staticStyle:{"background-color":"#9ee88f"}},[e._v("10 < m²/habitant <= 12 (entre 25 et 45 m²/hab à la campagne)")])]),o("tr",[o("td",{staticStyle:{"background-color":"#d8973e"}},[e._v("> 10 m²/habitant en ville (25 m²/hab à la campagne) mais dont une partie de la population est exclue.")])]),o("tr",[o("td",{staticStyle:{background:"linear-gradient(to right, #e0e0e0, #7c7c7c)"}},[e._v("< 10 m²/habitant (< 25 m²/hab à la campagne)")])]),o("tr",[o("td",{staticStyle:{"background-color":"#f1e2e2",color:"black"}},[e._v("N'est pas un parc")])]),o("tr",[o("td",{staticStyle:{"background-color":"#4944f5"}},[e._v("N'a pas été calculé")])])])])])}],n=function(){var e=this,o=e._self._c;return o("div",[o("button",{on:{click:function(o){e.layerIndex=0}}},[e._v("plan")]),e._v(" "),o("button",{on:{click:function(o){e.layerIndex=1}}},[e._v("satellite")]),o("label",{attrs:{for:"checkbox"}},[e._v(" | Isochrones")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.showIsochrones,expression:"showIsochrones"}],attrs:{id:"checkbox",type:"checkbox"},domProps:{checked:Array.isArray(e.showIsochrones)?e._i(e.showIsochrones,null)>-1:e.showIsochrones},on:{change:function(o){var t=e.showIsochrones,r=o.target,a=!!r.checked;if(Array.isArray(t)){var s=null,n=e._i(t,s);r.checked?n<0&&(e.showIsochrones=t.concat([s])):n>-1&&(e.showIsochrones=t.slice(0,n).concat(t.slice(n+1)))}else e.showIsochrones=a}}}),o("label",{attrs:{for:"cbCarre"}},[e._v("| Données carroyées")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.showCarre,expression:"showCarre"}],attrs:{id:"cbCarre",type:"checkbox"},domProps:{checked:Array.isArray(e.showCarre)?e._i(e.showCarre,null)>-1:e.showCarre},on:{change:function(o){var t=e.showCarre,r=o.target,a=!!r.checked;if(Array.isArray(t)){var s=null,n=e._i(t,s);r.checked?n<0&&(e.showCarre=t.concat([s])):n>-1&&(e.showCarre=t.slice(0,n).concat(t.slice(n+1)))}else e.showCarre=a}}}),o("label",{attrs:{for:"cbCadastre"}},[e._v("| Cadastre")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.showCadastre,expression:"showCadastre"}],attrs:{id:"cbCadastre",type:"checkbox"},domProps:{checked:Array.isArray(e.showCadastre)?e._i(e.showCadastre,null)>-1:e.showCadastre},on:{change:function(o){var t=e.showCadastre,r=o.target,a=!!r.checked;if(Array.isArray(t)){var s=null,n=e._i(t,s);r.checked?n<0&&(e.showCadastre=t.concat([s])):n>-1&&(e.showCadastre=t.slice(0,n).concat(t.slice(n+1)))}else e.showCadastre=a}}}),o("label",{attrs:{for:"checkboxWithOMS"}},[e._v("| Conforme OMS")]),o("input",{directives:[{name:"model",rawName:"v-model",value:e.checkboxWithOMS,expression:"checkboxWithOMS"}],attrs:{id:"checkboxWithOMS",type:"checkbox"},domProps:{checked:Array.isArray(e.checkboxWithOMS)?e._i(e.checkboxWithOMS,null)>-1:e.checkboxWithOMS},on:{change:function(o){var t=e.checkboxWithOMS,r=o.target,a=!!r.checked;if(Array.isArray(t)){var s=null,n=e._i(t,s);r.checked?n<0&&(e.checkboxWithOMS=t.concat([s])):n>-1&&(e.checkboxWithOMS=t.slice(0,n).concat(t.slice(n+1)))}else e.checkboxWithOMS=a}}}),o("br"),o("l-map",{staticStyle:{height:"700px",width:"95%"},attrs:{zoom:e.zoom,center:e.center,"min-zoom":e.minZoom,"max-zoom":e.maxZoom},on:{"update:bounds":e.boundsUpdated}},[o("l-tile-layer",{attrs:{url:e.layer.url,subdomains:e.layer.subdomains,attribution:e.layer.attribution}}),e.showIsochrones?o("l-geo-json",{attrs:{geojson:e.geojsonIsochrone,options:e.detailIsochrone,"options-style":e.styleIsochroneFunction}}):e._e(),e.showCarre?o("l-geo-json",{attrs:{geojson:e.geojsonCarre,options:e.detailCarre,"options-style":e.styleCarreFunction}}):e._e(),e.showCadastre?o("l-geo-json",{attrs:{geojson:e.geojsonCadastre,options:e.detailCadastre,"options-style":e.styleCadastreFunction}}):e._e(),o("l-control-scale",{attrs:{position:"topright",imperial:!1,metric:!0}})],1)],1)},i=[],c=(t(8145),t(185)),l=t(819),h=t(3685),d=t(4761),p=t(5462),u=t(5943),m=t(2314),g={name:"Isochrone",components:{LMap:c.Z,LIconDefault:l.Z,LMarker:h.Z,LTileLayer:d.Z,LGeoJson:p.Z,LPolygon:u.Z,LControlScale:m.Z},data(){return{loading:!1,showIsochrones:!0,showCarre:!1,showCadastre:!1,checkboxWithOMS:!0,zoom:14,minZoom:10,maxZoom:18,center:[50.6349747,3.046428],bounds:null,boundSwLat:0,boundSwLng:0,boundNeLat:0,boundNeLng:0,geojsonIsochrone:null,geojsonCarre:null,geojsonCadastre:null,restUrlCadastre:"http://localhost:8980/isochrone/map/cadastre/area",restUrlCarre:"http://localhost:8980/isochrone/map/insee/carre200m/area",restUrlIsochrones:"http://localhost:8980/isochrone/map/park/area",fillColor:"#A0DCA0",layerIndex:0,layers:[{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> <a href="https://www.facebook.com/lmoxygene/">LM Oxygène</a> '},{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",attribution:'&copy; <a href="https://www.arcgis.com/">ArcGisOnline</a> <a href="https://www.facebook.com/lmoxygene/">LM Oxygène</a> '}]}},methods:{boundsUpdated(e){if(this.bounds=e,e._southWest.lat<this.boundSwLat||e._southWest.lng<this.boundSwLng||e._northEast.lat>this.boundNeLat||e._northEast.lng>this.boundNeLng){this.boundSwLat=e._southWest.lat,this.boundSwLng=e._southWest.lng,this.boundNeLat=e._northEast.lat,this.boundNeLng=e._northEast.lng;var o="?swLat="+this.boundSwLat+"&swLng="+this.boundSwLng+"&neLat="+this.boundNeLat+"&neLng="+this.boundNeLng;console.log(o),this.callGeoJsonIsochrones(o),this.callGeoJsonCarres(o),this.callGeoJsonCadastre(o)}},async callGeoJsonIsochrones(e){console.log("callGeoJsonIsochrones");var o="https://raw.githubusercontent.com/cunvoas/opendata-tools/main/geoservice-map/src/assets/geojson/lommePark.json";const t=await fetch(o+e),r=await t.json();this.geojsonIsochrone=r},async callGeoJsonCarres(e){console.log("callGeoJsonCarres");var o="https://raw.githubusercontent.com/cunvoas/opendata-tools/main/geoservice-map/src/assets/geojson/lommeCarre.json";const t=await fetch(o+e),r=await t.json();this.geojsonCarre=r},async callGeoJsonCadastre(e){console.log("callGeoJsonCadastre");var o="https://raw.githubusercontent.com/cunvoas/opendata-tools/main/geoservice-map/src/assets/geojson/lommeCadastre.json";const t=await fetch(o+e),r=await t.json();this.geojsonCadastre=r}},computed:{layer(){return this.layers[this.layerIndex]},detailIsochrone(){return{onEachFeature:this.onDetailIsochrone}},detailCadastre(){return{onEachFeature:this.onDetailCadastre}},detailCarre(){return{onEachFeature:this.onDetailCarre}},styleIsochroneFunction(){const e=this.fillColor;return()=>({weight:2,color:"#406C40",opacity:.95,fillColor:e,fillOpacity:.6})},styleCarreFunction(){return()=>({weight:2,color:"#24216a",opacity:.95,fillColor:"#060512",fillOpacity:.2})},styleCadastreFunction(){return()=>({weight:2,color:"#CB9800",opacity:.95,fillColor:"#FFFF99",fillOpacity:.3})},onDetailIsochrone(){return(e,o)=>{o.bindTooltip("<div>Quartier:"+e.properties.quartier+"</div><div>"+e.properties.name+" (id:"+e.properties.id+")</div><div>"+e.properties.people+" hab. pour "+e.properties.area+" m² ("+e.properties.areaPerPeople+" m²/h)</div>",{permanent:!1,sticky:!0}),this.checkboxWithOMS&&!e.properties.oms?o.setStyle({fillColor:e.properties.fillColor,opacity:0,fillOpacity:0}):o.setStyle({fillColor:e.properties.fillColor,fillOpacity:.6})}},onDetailCarre(){return(e,o)=>{o.bindTooltip("<div>ID:"+e.properties.id+"</div><div>Commune: "+e.properties.commune+"</div><div>Population: "+e.properties.people+"</div><div>Dont parc: "+e.properties.popParkIncludedOms+"</div><div>Sans parc: "+e.properties.popParkExcludedOms+"</div><div>Parcs acessibles: "+e.properties.surfaceTotalParkOms+" m²</div><div>Partagés avec : "+e.properties.popSquareShareOms+" pers.</div><div>Soit : "+e.properties.squareMtePerCapitaOms+" m²/hab</div>",{permanent:!1,sticky:!0}),"n/a"!==e.properties.popParkIncluded&&o.setStyle({fillColor:e.properties.fillColor,fillOpacity:.6})}},onDetailCadastre(){return(e,o)=>{o.bindTooltip("<div>INSEE:"+e.properties.idInsee+"</div><div>Commune: "+e.properties.nom+"</div>",{permanent:!1,sticky:!0})}}},created(){var e=this;this.loading=!0,Promise.all([this.callGeoJsonCarres(e.restUrlCarre+"?swLat=50.61309246538529&swLng=2.967338562011719&neLat=50.65664364875093&neLng=3.125095367431641"),this.callGeoJsonIsochrones(e.restUrlIsochrones+"?swLat=50.61309246538529&swLng=2.967338562011719&neLat=50.65664364875093&neLng=3.125095367431641"),this.callGeoJsonCadastre(e.restUrlCadastre+"?swLat=50.61309246538529&swLng=2.967338562011719&neLat=50.65664364875093&neLng=3.125095367431641")]).then((o=>{console.log(o),e.loading=!1}))}},b=g,v=t(1001),f=(0,v.Z)(b,n,i,!1,null,null,null),y=f.exports,w={name:"App",components:{Isochrone:y}},C=w,x=(0,v.Z)(C,a,s,!1,null,null,null),k=x.exports;r.ZP.config.productionTip=!1,new r.ZP({render:e=>e(k)}).$mount("#app")},4881:function(e,o,t){e.exports=t.p+"img/logo-autmel.db56a748.png"},1434:function(e,o,t){e.exports=t.p+"img/logo-deulair.2d9ef365.png"},2465:function(e,o,t){e.exports=t.p+"img/logo-lmo.8c965956.png"}},o={};function t(r){var a=o[r];if(void 0!==a)return a.exports;var s=o[r]={exports:{}};return e[r].call(s.exports,s,s.exports,t),s.exports}t.m=e,function(){var e=[];t.O=function(o,r,a,s){if(!r){var n=1/0;for(h=0;h<e.length;h++){r=e[h][0],a=e[h][1],s=e[h][2];for(var i=!0,c=0;c<r.length;c++)(!1&s||n>=s)&&Object.keys(t.O).every((function(e){return t.O[e](r[c])}))?r.splice(c--,1):(i=!1,s<n&&(n=s));if(i){e.splice(h--,1);var l=a();void 0!==l&&(o=l)}}return o}s=s||0;for(var h=e.length;h>0&&e[h-1][2]>s;h--)e[h]=e[h-1];e[h]=[r,a,s]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var r in o)t.o(o,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:o[r]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){t.p=""}(),function(){var e={143:0};t.O.j=function(o){return 0===e[o]};var o=function(o,r){var a,s,n=r[0],i=r[1],c=r[2],l=0;if(n.some((function(o){return 0!==e[o]}))){for(a in i)t.o(i,a)&&(t.m[a]=i[a]);if(c)var h=c(t)}for(o&&o(r);l<n.length;l++)s=n[l],t.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return t.O(h)},r=self["webpackChunkgeoservice_lmoxygene"]=self["webpackChunkgeoservice_lmoxygene"]||[];r.forEach(o.bind(null,0)),r.push=o.bind(null,r.push.bind(r))}();var r=t.O(void 0,[998],(function(){return t(9844)}));r=t.O(r)})();
//# sourceMappingURL=app.f20b0371.js.map